<!DOCTYPE html><html lang="en-gb"><head><meta charset="utf-8"><title>Authoring critical above-the-fold CSS / Ben Edwards, a Web Designer and Developer</title><meta name="viewport" content="initial-scale=1"><style>html{-webkit-text-size-adjust:100%;-ms-text-size-adjust:100%;text-size-adjust:100%}body{background:#222;color:#fff;font:112.5%/1.5 Arial,sans-serif;margin:0}@media screen and (min-width:700px){body{line-height:1.75}}a{border-bottom:1px dotted #bbb;border-color:rgba(187,187,187,.5);color:#fff;text-decoration:none;-webkit-transition:border-color .25s ease-in-out;transition:border-color .25s ease-in-out}a:active,a:focus,a:hover{border-color:transparent}.container{margin:auto;max-width:60em;padding:2em 1em;width:60em}[class=container]{width:auto}h1,hr{-webkit-border-image:-webkit-linear-gradient(left,#cba276 0,#c9a376 8%,#cba276 9%,#c3a174 14%,#bea272 18%,#c0a172 19%,#bea473 20%,#bba774 25%,#b3a978 30%,#aca878 31%,#a9a777 32%,#a8a676 33%,#9ca178 35%,#979e74 36%,#8d9975 38%,#859571 39%,#788c70 41%,#738a6e 42%,#65806d 45%,#5e7a6c 48%,#5f7270 55%,#5d6c6f 57%,#56686c 59%,#56676e 60%,#435667 66%,#405165 68%,#445366 72%,#565d6d 75%,#6e6c77 78%,#9b8987 82%,#b89d94 87%,#bca094 92%,#b69a8f 95%,#b5998e 96%,#b2958f 100%) 100% 1!important;-o-border-image:linear-gradient(left,#cba276 0,#c9a376 8%,#cba276 9%,#c3a174 14%,#bea272 18%,#c0a172 19%,#bea473 20%,#bba774 25%,#b3a978 30%,#aca878 31%,#a9a777 32%,#a8a676 33%,#9ca178 35%,#979e74 36%,#8d9975 38%,#859571 39%,#788c70 41%,#738a6e 42%,#65806d 45%,#5e7a6c 48%,#5f7270 55%,#5d6c6f 57%,#56686c 59%,#56676e 60%,#435667 66%,#405165 68%,#445366 72%,#565d6d 75%,#6e6c77 78%,#9b8987 82%,#b89d94 87%,#bca094 92%,#b69a8f 95%,#b5998e 96%,#b2958f 100%) 100% 1!important;border-image:linear-gradient(left,#cba276 0,#c9a376 8%,#cba276 9%,#c3a174 14%,#bea272 18%,#c0a172 19%,#bea473 20%,#bba774 25%,#b3a978 30%,#aca878 31%,#a9a777 32%,#a8a676 33%,#9ca178 35%,#979e74 36%,#8d9975 38%,#859571 39%,#788c70 41%,#738a6e 42%,#65806d 45%,#5e7a6c 48%,#5f7270 55%,#5d6c6f 57%,#56686c 59%,#56676e 60%,#435667 66%,#405165 68%,#445366 72%,#565d6d 75%,#6e6c77 78%,#9b8987 82%,#b89d94 87%,#bca094 92%,#b69a8f 95%,#b5998e 96%,#b2958f 100%) 100% 1!important}blockquote{-webkit-border-image:-webkit-linear-gradient(top,#cba276 0,#c9a376 8%,#cba276 9%,#c3a174 14%,#bea272 18%,#c0a172 19%,#bea473 20%,#bba774 25%,#b3a978 30%,#aca878 31%,#a9a777 32%,#a8a676 33%,#9ca178 35%,#979e74 36%,#8d9975 38%,#859571 39%,#788c70 41%,#738a6e 42%,#65806d 45%,#5e7a6c 48%,#5f7270 55%,#5d6c6f 57%,#56686c 59%,#56676e 60%,#435667 66%,#405165 68%,#445366 72%,#565d6d 75%,#6e6c77 78%,#9b8987 82%,#b89d94 87%,#bca094 92%,#b69a8f 95%,#b5998e 96%,#b2958f 100%) 1 100%!important;-o-border-image:linear-gradient(top,#cba276 0,#c9a376 8%,#cba276 9%,#c3a174 14%,#bea272 18%,#c0a172 19%,#bea473 20%,#bba774 25%,#b3a978 30%,#aca878 31%,#a9a777 32%,#a8a676 33%,#9ca178 35%,#979e74 36%,#8d9975 38%,#859571 39%,#788c70 41%,#738a6e 42%,#65806d 45%,#5e7a6c 48%,#5f7270 55%,#5d6c6f 57%,#56686c 59%,#56676e 60%,#435667 66%,#405165 68%,#445366 72%,#565d6d 75%,#6e6c77 78%,#9b8987 82%,#b89d94 87%,#bca094 92%,#b69a8f 95%,#b5998e 96%,#b2958f 100%) 1 100%!important;border-image:linear-gradient(top,#cba276 0,#c9a376 8%,#cba276 9%,#c3a174 14%,#bea272 18%,#c0a172 19%,#bea473 20%,#bba774 25%,#b3a978 30%,#aca878 31%,#a9a777 32%,#a8a676 33%,#9ca178 35%,#979e74 36%,#8d9975 38%,#859571 39%,#788c70 41%,#738a6e 42%,#65806d 45%,#5e7a6c 48%,#5f7270 55%,#5d6c6f 57%,#56686c 59%,#56676e 60%,#435667 66%,#405165 68%,#445366 72%,#565d6d 75%,#6e6c77 78%,#9b8987 82%,#b89d94 87%,#bca094 92%,#b69a8f 95%,#b5998e 96%,#b2958f 100%) 1 100%!important}.content{background:#333}h1{border:0;border-bottom:1px solid #bbb;border-bottom-color:rgba(187,187,187,.5);font-size:2em;font-weight:300;line-height:1.25;margin:0 0 .75em;padding:0 0 .25em}@media screen and (min-width:700px){h1{font-size:2.5em;line-height:1.125}}@media screen and (min-width:900px){h1{font-size:3em;line-height:1.25}}h1 a{border-color:#222}h1 time{font-size:.5em}h2{font-size:1.625em;font-weight:300;line-height:1.15;margin:1em 0}@media screen and (min-width:700px){h2{font-size:2em;line-height:1.25}}@media screen and (min-width:900px){h2{font-size:2.25em}}h2 a{border-color:#222}h2 small{color:#bbb}h2 time{font-size:.65em}.ellipsis{border:0;display:block;line-height:1;margin:0 0 1.5em;text-align:center;text-decoration:none;text-shadow:#333 1px 1px 0}.ellipsis:before{color:#000;content:'○○○';font-size:2.25em;-webkit-transition:color .25s ease-in-out;transition:color .25s ease-in-out}@media screen and (min-width:900px){.ellipsis:before{font-size:1.5em}}.ellipsis:active,.ellipsis:focus,.ellipsis:hover{text-shadow:none}.ellipsis:active:before,.ellipsis:focus:before,.ellipsis:hover:before{color:#bbb}.ellipsis span{display:none}h3{font-size:1.375em;line-height:1.15;margin:0 0 1em}@media screen and (min-width:700px){h3{font-size:1.5em;line-height:1.25}}@media screen and (min-width:900px){h3{font-size:1.75em}}h4{font-size:1.125em;line-height:1.1;margin:0 0 .5em}@media screen and (min-width:700px){h4{line-height:1.2}}h5,h6{font-size:1em;margin:0 0 .25em}time,time a{color:#bbb}hr{border:0;border-bottom:1px solid #bbb;border-bottom-color:rgba(187,187,187,.5);height:0;margin:0 0 1.5em;overflow:hidden}p{margin:0 0 1.5em}li{margin:.5em}ul{list-style:circle;margin:0 0 1em;padding:0 0 0 1em}ul>li{list-style:none}ul>li:before{color:#bbb;content:'○';display:block;left:-1em;max-height:0;max-width:0;position:relative}ol{counter-reset:li;list-style:decimal;margin:0 0 1em;padding:0 0 0 1em}ol>li{list-style:none}ol>li:before{color:#bbb;content:counter(li) '.';counter-increment:li;display:block;font-size:.85em;font-style:italic;left:-1.25em;max-height:0;max-width:0;position:relative;top:.2em}blockquote{border:0;border-left:1px solid #bbb;border-left-color:rgba(187,187,187,.5);font-size:1.25em;font-weight:300;margin:1.5em 0;padding:0 1em}blockquote a{color:#bbb}blockquote cite{display:block;font-style:normal}blockquote cite:before{color:#bbb;content:'-';margin:0 .2em 0 -.575em}blockquote p{margin:0}blockquote q:before{margin-left:-.5em}blockquote time{font-size:.65em;margin:0 0 0 .25em}@media screen and (min-width:700px){blockquote{font-size:1.5em;line-height:1.45}}q{quotes:'“' '”' '‘' '’'}q:after{color:#bbb;content:close-quote}q:before{color:#bbb;content:open-quote}pre{font-family:Consolas,monaco,monospace;margin:2em 0;overflow:auto}code{background:#000;color:#fff;font-family:Consolas,monaco,monospace;-webkit-hyphens:none;-moz-hyphens:none;-ms-hyphens:none;hyphens:none;padding:.15em .25em;-moz-tab-size:4;-o-tab-size:4;tab-size:4}.hljs-attribute{color:#ff7}.hljs-built_in{color:#93b082}.hljs-comment,.hljs-tag{color:#bbb}.hljs-important,.hljs-regexp{color:#fba266}.hljs-keyword,.hljs-string,.hljs-value{color:#f786ad}.hljs-title{color:#8ea9d7}abbr[title]{border-bottom:1px dotted #222;cursor:help}del,s{color:#bbb;font-weight:300}ins,u{font-weight:300}kbd,samp{font-family:Consolas,monaco,monospace}mark{background:#000;color:#fff;font-weight:300;padding:.15em .25em}table{border-right:1px solid #333;border-collapse:collapse;font-weight:300;margin:0 0 1.5em;width:100%}table td,table th{border:0 dotted #bbb;border:rgba(187,187,187,.5) -color;border-right-width:1px;border-top-width:1px;padding:0 .5em}table th{border-bottom-style:solid;border-bottom-width:1px;border-top:0;font-weight:700;padding:.25em .5em}.video{height:0;overflow:hidden;margin:0 0 1.5em;padding-bottom:56.25%;position:relative}.video embed,.video iframe,.video object{border:0;height:100%;left:0;position:absolute;top:0;width:100%}.footer{color:#bbb;font-weight:300;padding:3em 0 2em;text-align:center}.footer a,.footer span{display:inline-block;margin:0 .35em 1em}.header{background:url(data:image/jpeg;base64,/9j/4QAYRXhpZgAASUkqAAgAAAAAAAAAAAAAAP/sABFEdWNreQABAAQAAAAAAAD/4QMZaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLwA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjMtYzAxMSA2Ni4xNDU2NjEsIDIwMTIvMDIvMDYtMTQ6NTY6MjcgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVCQ0E3M0U0MzEwMDExRTNCNTkzQUE5MEIzREZFOEVCIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVCQ0E3M0UzMzEwMDExRTNCNTkzQUE5MEIzREZFOEVCIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzYgV2luZG93cyI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSIxMDVEQjFCRjFEM0NBRjUxRUFFRjg4MjNDNjlBMjVCNyIgc3RSZWY6ZG9jdW1lbnRJRD0iMTA1REIxQkYxRDNDQUY1MUVBRUY4ODIzQzY5QTI1QjciLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7/7gAhQWRvYmUAZMAAAAABAwAQAwIDBgAAFEsAABR4AAAUnP/bAIQAGxoaKR0pQSYmQUIvLy9CRz8+Pj9HR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHRwEdKSk0JjQ/KCg/Rz81P0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dHR0dH/8IAEQgBkAfQAwEiAAIRAQMRAf/EAG0AAQEBAQEBAQAAAAAAAAAAAAABAgYFAwQBAQEBAQEAAAAAAAAAAAAAAAABAwIEEAEBAAMBAQEAAAAAAAAAAAARABAgcLCg0BEBAAAAAAAAAAAAAAAAAAAA0BIBAAAAAAAAAAAAAAAAAAAAsP/aAAwDAQACEQMRAAAAqueIpIoiiNCKJaiWiWgtiLVlWJaJaWVYillqIpYoilk0MtSWKIpYoy0XKiKIpYoiiKWLSKIoiliiKIoiiKIoiiKSKIokoiiKIpIoiiKIoikiiKABUiiLALIoiwikkqpLEiypLEkqpLEksqCySwSyxLAAAKBQAAAAWLKSiSiSqksSLCLKgICLCKqAAFJQKhVVZRqWW1VamoVZbVW1YalltUUlVSVSKIokoiiSiSiAiwAiygPk0mGWhFEURoRaZtEtEtRLaRbEWrKsRaRaubURSxURSxRFLFLlqEVLFEUsUZaGVLFEURaubYFEURRFLFEURRFEURSRRFEWEURRFEUkURRFEURRFJFEURVRSRRFgCRYJVSWJFlSUmVlSWJJZZJZUCSWUlgllgAAAUAKsUJRFEBFlRYRYRZUWJJVSUSUQEURYAFApKqiirKqls1Kqy2qWrLbNSqpbLLSigVKAlEUSVUlJJRJRARYARYZaMc2iKI0TNojQi2ItItWLYi0lqItWLYili2M2liiKlk0MqWKIpcqIpYoiliiSpYoiiKEpYoAAAFIoiiKIsAAEoiiKIoiiKsiiLAAAAEAAAAikiiCosEpMrKixJLKkpMzUszNSsrEksqSrJLBKsgAAAFAAKAASiAiyosIsqSiSkkqpKIsIoiiKJQKUoVYVVVZWpS1ZbZqVqaGpZbZpVWFFVYlAUgEokokokqpKJKSAgEoqpjFEaGWhFpm0S0S1EaEtLLUS0RbLFEtRFLFRFLFLFEmpLFEUslEUsURYRSxRFEUsURRFEURSxRFEURRFEURRFEUkURYAJRFEURRFEURRFEUkURYBSURSQEWEWVFiSalSWJJZZJYSazZJVmZqVJYkWVAiVUURQAKSgAAFRRARZZFhJqElVJRJRBZFEBFEopRKpKsKLbLLbKWrK1Kt1LFqy2yrasKqqRSgAACUSUSUSUSWUlglglECfRUyi0y0ItMtIjQi0zbTNqJaJaItliiWpYoipYoilioilyoiliwiliogIpYoiliwAAABQAAAAAAAAAIoiiKIoiwACkoiiKIpIoiiKIABKIsEqyAiwiyySjKyySwksskssksJNSzKyySiCyKIAWyKACiUAEoiqkoiwiypNRJNQkqpNQiwiiKqKIolIKVQVRVlVVali2alalW1YtlW2WLZVtlhQFUBKICLEiwiwgIKgICLD7q5yjRM2iNDNoloi0i2IpZaItiKJaliiKliiKliiKWAipYsIoixUoiliwSiKWKIoiiBQAAAAAAAAAAAAIoiiLAAAACKIoiiACgEoiwAixEogqSiSyyTUJLLJLEk1KzNSzM1LMrEk1KixIqopIoigAolKASiKJKSLKiwiyosIsSLKiiAiiKJQKUUFhRaVVWLZVtmoalltlW1YtlW2WFlWgWUAAQEsEsEsRLBLKSwSwA/SrjKLSKItIoloi0iiWoi0illWIoipYoiiKliiSliogWKIFiiAiliiBUoiiKIoiliiKIUioiiKIoiqgAAAEoiiKIsAAEoiiKWAAAAikiwCkogIsEokqySwk1KksSTUszNSszUTKyyTUsyoyqyTUIpIqgCiKAQACKqSiLKiwixIsqLCKJKqKIoiiKJQUlUFUWWW2VbZYtlW2WW6lLZZbZSiLZVWUWCoKgASwSwSwSxEsEspLAD9a3jOKSLSKJaItIqJVIoKWKiVSKliiKIslAiliyIogWKIFiogVKIsAEpYoiiKIogAUoiiKIoiiAAAAAiiKqLAACKIpYAABKIogAAIogpKICLEiwiypNRJKrM1Eyssk1KzNRMqsyqsqTKkiqiiKSKABaiwAiiCyLCLCKrKiSrJKIokoiiKJRSiVSVVFhRbZRVlVS2WW2UtiXVzS2WWpSpSoKlBCoBABAQEBLLEsAP21c84oKIoKJVIoFIolIKIpYqIoipYsAIqWAilgIqIFiwAixQAIpYsAAAAAABSKIoiwAAABUoiiLAACKqLAFASiLAAACKIABKIBKqAiwixIsqSkysqTUsysSTUrKkyqzKjKrIoikiqiiKIoikiykoiwi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) 50% 0/100% 100% #cba276}.header .container{padding:1em}.header a{background:#000;border:0;display:inline-block;font-size:1.125em;font-weight:700;letter-spacing:.35em;line-height:2;padding:0 .3em 0 .65em;text-transform:uppercase}@media screen and (min-width:900px){.header .container{padding:2em 1em}.header a{font-size:1.25em}}</style><meta name="description" content="Authoring critical above-the-fold CSS, and asynchronously loading none render-blocking CSS"><meta name="author" content="Ben Edwards"><link rel="canonical" href="https://benedfit.com/2014/07/authoring-critical-above-the-fold-css/"><link rel="alternate" type="application/rss+xml" title="Feed / Ben Edwards, a Web Designer and Developer" href="https://benedfit.com/feed.xml"><link rel="author" href="https://plus.google.com/+benedfit"><link rel="source" href="https://github.com/benedfit/benedfit.github.io"><link rel="apple-touch-icon" href="/img/apple-touch-icon-57x57.png" sizes="57x57"><link rel="apple-touch-icon" href="/img/apple-touch-icon-60x60.png" sizes="60x60"><link rel="apple-touch-icon" href="/img/apple-touch-icon-72x72.png" sizes="72x72"><link rel="apple-touch-icon" href="/img/apple-touch-icon-76x76.png" sizes="76x76"><link rel="apple-touch-icon" href="/img/apple-touch-icon-114x114.png" sizes="114x114"><link rel="apple-touch-icon" href="/img/apple-touch-icon-120x120.png" sizes="120x120"><link rel="apple-touch-icon" href="/img/apple-touch-icon-144x144.png" sizes="144x144"><link rel="apple-touch-icon" href="/img/apple-touch-icon-152x152.png" sizes="152x152"><link rel="icon" type="image/png" href="/img/favicon-16x16.png" sizes="16x16"><link rel="icon" type="image/png" href="/img/favicon-32x32.png" sizes="32x32"><link rel="icon" type="image/png" href="/img/favicon-96x96.png" sizes="96x96"><link rel="icon" type="image/png" href="/img/favicon-160x160.png" sizes="160x160"><link rel="icon" type="image/png" href="/img/favicon-196x196.png" sizes="196x196"><!--[if IE]><link rel='shortcut icon' type='image/x-icon' href='/favicon.ico')<![endif]--><meta name="msapplication-TileColor" content="#000000"><meta name="msapplication-TileImage" content="/img/mstile-144x144.png"><meta itemprop="name" content="Authoring critical above-the-fold CSS"><meta itemprop="description" content="Authoring critical above-the-fold CSS, and asynchronously loading none render-blocking CSS"><meta itemprop="image" content="https://www.gravatar.com/avatar/f192577527e4541aa21b501fb43ee68c?s=200"><meta property="og:url" content="https://benedfit.com/2014/07/authoring-critical-above-the-fold-css/"><meta property="og:type" content="article"><meta property="og:site_name" content="benedfit.com"><meta property="og:title" content="Authoring critical above-the-fold CSS"><meta property="og:description" content="Authoring critical above-the-fold CSS, and asynchronously loading none render-blocking CSS"><meta property="og:image" content="https://www.gravatar.com/avatar/f192577527e4541aa21b501fb43ee68c?s=200"><meta property="og:updated_time" content="2014-11-27T11:28:54+00:00"><meta property="fb:profile_id" content="100001139733853"><meta property="article:published_time" content="2014-07-28T00:00:00+00:00"><meta property="article:modified_time" content="2014-07-28T00:00:00+00:00"><meta property="article:author" content="https://benedfit.com/"><meta name="twitter:card" content="summary"><meta name="twitter:site" content="@benedfit"><meta name="twitter:domain" content="benedfit.com"><meta name="twitter:title" content="Authoring critical above-the-fold CSS"><meta name="twitter:description" content="Authoring critical above-the-fold CSS, and asynchronously loading none render-blocking CSS"><meta name="twitter:creator" content="@benedfit"><meta name="twitter:image" content="https://www.gravatar.com/avatar/f192577527e4541aa21b501fb43ee68c?s=200"></head><body><div role="banner" class="header"><div class="container"><a href="/" rel="home">Ben Edwards</a></div></div><div role="main" class="content"><div class="container"><h1><a href="/2014/07/authoring-critical-above-the-fold-css/" rel="bookmark">Authoring critical above-the-fold CSS</a> <time datetime="2014-07-28T00:00:00+00:00"><a href="/2014/07/" rel="directory">July</a>&nbsp;28,&nbsp;<a href="/2014/" rel="directory">2014</a></time></h1><blockquote><p><a href="http://css-tricks.com/authoring-critical-fold-css/">This was originally posted on CSS-Tricks on July 14, 2014</a>. <a href="https://twitter.com/chriscoyier">Chris Coyier</a> invited me to write a piece <a href="https://gist.github.com/benedfit/46da533805566141c42f">after I shared this gist</a>, that led me down a rabbit hole to this article.</p></blockquote><p><a href="http://developers.google.com/speed/pagespeed/insights/">Google PageSpeed Insights</a> and my web pages; it was a match made in heaven, until things changed... PageSpeed started telling me I needed to optimise my CSS delivery, that my CSS files were render-blocking, that none of the above-the-fold content of my page could render without waiting for those files to load, and that I should in-line the critical portions of those files directly into my HTML. <q>Go home PageSpeed,</q> I cried, <q>who in their right mind wants a mass of CSS in their HTML? I&#39;m a legitimate professional, I have a work-flow don&#39;t you know?</q> I scoffed.</p><p>This had long been my stand point until I read the following tweet:</p><blockquote><p><q>I&#39;d like to see a site like CSS Zen Garden, but where developers try to make the same responsive site score better on <a href="http://www.webpagetest.org/">webpagetest.org</a></q> <cite><a href="https://twitter.com/scottjehl/statuses/477112692684390400">Scott Jehl</a> <time>June 12, 2014</time></cite></p></blockquote><p>I&#39;ve long committed myself to getting my web pages the best possible scores from webpagetest.org, and that required a change of work-flow, so why shouldn&#39;t I change it for PageSpeed?.. Now if you&#39;re already using <a href="https://developers.google.com/speed/pagespeed/module?csw=1">Google&#39;s mod_pagespeed module</a> put your feet up and give yourself a pat on the back as <a href="https://developers.google.com/speed/pagespeed/module/filter-prioritize-critical-css">the module has you covered</a>. For those of you, like myself, who aren&#39;t, here&#39;s how I went about it:</p><h2>Here comes the science part...</h2><p>To solve the problem I first needed to understand what PageSpeed was telling me. External stylesheets (read those included via <code>link</code> tags) are render-blocking. This means that the browser won&#39;t paint content to the screen until all of your CSS has been downloaded. Couple this with the fact that if the amount of data required to render the page exceeds the initial congestion window (typically 14.6kB compressed) it will required additional round trips between the server and the user&#39;s browser. This all adds up to additional network latency, and for users on high latency networks, such as mobile, can cause significant delays to page loading.</p><p>PageSpeed&#39;s recommendation is to split your CSS into two parts; an in-line part that&#39;s responsible for styling the above-the-fold portion of the content, and the rest, which can be deferred. Now before we get hung up on whether the fold exists or not, let&#39;s just agree that anything we can do to get our data to our users as quickly as possible is a good thing, right?</p><h2>Determining what&#39;s critical</h2><p>Determining which portions of our CSS are critical required inspecting my web pages at &#39;mobile&#39; and &#39;desktop&#39; sizes, then taking a snapshot of the CSS rules applied to the elements visible in the viewport. This seemed like a daunting task, but fear not, some very smart people were there to help:</p><ul><li><a href="https://twitter.com/Paul_Kinlan">Paul Kinlan</a> has created a <a href="https://gist.github.com/PaulKinlan/6284142">bookmarklet/Chrome dev tools snippet</a> to aid in the process</li><li><a href="https://gist.github.com/scottjehl/b6129da04733e4e0f9a4">as too has Scott Jehl</a> which is also available as a <a href="https://github.com/filamentgroup/criticalcss">Node module</a> and as a <a href="https://github.com/filamentgroup/grunt-criticalcss">Grunt task</a></li><li>Penthouse by <a href="https://twitter.com/pocketjoso">Jonas Ohlsson</a> is available as a <a href="https://github.com/pocketjoso/penthouse">Node module</a> a <a href="https://github.com/fatso83/grunt-penthouse">Grunt task</a> and as <a href="http://jonassebastianohlsson.com/criticalpathcssgenerator/">an on-line tool</a></li></ul><p>Armed with the results of the inspection process I now need to modify my HTML to load my CSS in a none render-blocking way.</p><h2>An asynchronously load off my mind</h2><p>Let&#39;s imagine that one of my HTML documents was as follows:</p><pre><code><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"things.css"</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"thing1"</span>&gt;</span>
      Hello world, how goes it?
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    ...
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"thing2"</span>&gt;</span>
      Hey, I'm totally below-the-fold
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre><p>And that <code>things.css</code> contained the following:</p><pre><code><span class="hljs-class">.thing1</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> red</span></span>; <span class="hljs-rule">}</span></span>
<span class="hljs-class">.thing2</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">background</span>:<span class="hljs-value"> green</span></span>; <span class="hljs-rule">}</span></span></code></pre><p>Using the results of the inspection process I can now in-line the critical, above-the-fold, portion of my CSS in the <code>head</code> like so:</p><pre><code><span class="hljs-tag">&lt;<span class="hljs-title">html</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">head</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">style</span>&gt;</span><span class="css">
      <span class="hljs-class">.thing1</span> <span class="hljs-rules">{ <span class="hljs-rule"><span class="hljs-attribute">color</span>:<span class="hljs-value"> red</span></span>; <span class="hljs-rule">}</span></span>
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">style</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">head</span>&gt;</span>
  <span class="hljs-tag">&lt;<span class="hljs-title">body</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"thing1"</span>&gt;</span>
      Hello world, how goes it?
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    ...</code></pre><p>Pair this with <a href="https://github.com/filamentgroup/loadCSS">Filament Group&#39;s loadCSS</a> and I can asynchronously load the remaining below-the-fold CSS like this:</p><pre><code>    ...
    <span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">class</span>=<span class="hljs-value">"thing2"</span>&gt;</span>
      Hey, I'm totally below-the-fold
    <span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">script</span>&gt;</span><span class="javascript">
      <span class="hljs-comment">/*!
      Modified for brevity from https://github.com/filamentgroup/loadCSS
      loadCSS: load a CSS file asynchronously.
      [c]2014 @scottjehl, Filament Group, Inc.
      Licensed MIT
      */</span>
      <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">loadCSS</span><span class="hljs-params">(href)</span></span>{
        <span class="hljs-keyword">var</span> ss = <span class="hljs-built_in">window</span>.document.createElement(<span class="hljs-string">'link'</span>),
            ref = <span class="hljs-built_in">window</span>.document.getElementsByTagName(<span class="hljs-string">'head'</span>)[<span class="hljs-number">0</span>];

        ss.rel = <span class="hljs-string">'stylesheet'</span>;
        ss.href = href;

        <span class="hljs-comment">// temporarily, set media to something non-matching to ensure it'll</span>
        <span class="hljs-comment">// fetch without blocking render</span>
        ss.media = <span class="hljs-string">'only x'</span>;

        ref.parentNode.insertBefore(ss, ref);

        setTimeout( <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">()</span></span>{
          <span class="hljs-comment">// set media back to `all` so that the stylesheet applies once it loads</span>
          ss.media = <span class="hljs-string">'all'</span>;
        }, <span class="hljs-number">0</span>);
      }
      loadCss(<span class="hljs-string">'things.css'</span>);
    </span><span class="hljs-tag">&lt;/<span class="hljs-title">script</span>&gt;</span>
    <span class="hljs-tag">&lt;<span class="hljs-title">noscript</span>&gt;</span>
      <span class="hljs-comment">&lt;!-- Let's not assume anything --&gt;</span>
      <span class="hljs-tag">&lt;<span class="hljs-title">link</span> <span class="hljs-attribute">rel</span>=<span class="hljs-value">"stylesheet"</span> <span class="hljs-attribute">href</span>=<span class="hljs-value">"things.css"</span>&gt;</span>
    <span class="hljs-tag">&lt;/<span class="hljs-title">noscript</span>&gt;</span>
  <span class="hljs-tag">&lt;/<span class="hljs-title">body</span>&gt;</span>
<span class="hljs-tag">&lt;/<span class="hljs-title">html</span>&gt;</span></code></pre><h2>A work-flow for the future</h2><p>Excellent news! PageSpeed is elated! It no longer complains of render-blocking CSS and is satisfied that above-the-fold content has been given the priority it deserves, but in this modern world of CSS preprocessors and front-end tooling a manual process like the one above just isn&#39;t going to hack it...</p><h3>An automated approach</h3><p>... Those of you looking for an automated mod_pagespeed style approach, and also familiar with Node (Apologies to those who aren&#39;t, but here at <a href="http://clock.co.uk/">Clock it&#39;s a massive part of everything we do</a>) will definitely want to look into <a href="https://github.com/pocketjoso/penthouse">Penthouse</a> and <a href="https://twitter.com/addyosmani">Addy Osmani&#39;s</a> <a href="https://github.com/addyosmani/critical">experimental Node module, Critical</a>, both of which provide means for in-lining or manipulating critical CSS as determined via the PageSpeed API. Now while a fully automated work-flow sounds like heaven the one thing that irks me with the current tools is that they don&#39;t take address the fact that any CSS rules that are in-lined are served again once the below-the-fold CSS is downloaded. And in the spirit of sending as little data as needed to our users, this feels like an unnecessary duplication.</p><h3>CSS preprocessors to the rescue</h3><p>Making use of your favourite CSS preprocessor for authoring above and below-the-fold CSS seems like a no-brainer to me and is something the Front-end team is currently experimenting with at Clock.</p><p>New projects lend themselves very well to this approach, and critical and non-critical CSS could be authored via some well structured <code>@import</code> rules:</p><pre><code class="language-scss"><span class="hljs-comment">// critical.scss - to be in-lined</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"header"</span>;</span></code></pre><pre><code class="language-scss"><span class="hljs-comment">// non-critical.scss - to be asynchronously loaded</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"web-fonts"</span>;</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"footer"</span>;</span></code></pre><p>Should your partials not lend themselves to this sort of structuring, <a href="https://github.com/Team-Sass/jacket">Team Sass&#39;s conditional styles Compass plug-in Jacket</a> can come in very handy. For example if your partial <code>_shared.scss</code> contained rules for both above and below-the-fold elements, the critical and non-critical rules could be wrapped by Jacket like so:</p><pre><code class="language-scss"><span class="hljs-at_rule">@<span class="hljs-keyword">include</span><span class="hljs-preprocessor"> jacket</span>(critical) {</span>
  <span class="hljs-class">.header</span>{
    <span class="hljs-attribute">color</span><span class="hljs-value">: red;</span>
  }
}

<span class="hljs-at_rule">@<span class="hljs-keyword">include</span><span class="hljs-preprocessor"> jacket</span>(non-critical) {</span>
  <span class="hljs-at_rule">@<span class="hljs-keyword">include</span><span class="hljs-preprocessor"> font-face</span>(...);</span>
  ...

  <span class="hljs-class">.footer</span>{
    <span class="hljs-attribute">color</span><span class="hljs-value">: blue;</span>
  }
}</code></pre><p>Then <code>critical.css</code> and <code>non-critical.css</code> could be edited as follows to result in the same CSS:</p><pre><code class="language-scss"><span class="hljs-comment">// critical.scss - to be in-lined</span>
<span class="hljs-variable">$jacket</span><span class="hljs-value">: critical;</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"shared"</span>;</span></code></pre><pre><code class="language-scss"><span class="hljs-comment">// non-critical.scss - to be asynchronously loaded</span>
<span class="hljs-variable">$jacket</span><span class="hljs-value">: non-critical;</span>
<span class="hljs-at_rule">@<span class="hljs-keyword">import</span> <span class="hljs-string">"shared"</span>;</span></code></pre><p>This approach also feels in-keeping with the way lots of the community is authoring media queries at a component level rather than in a global location, and could feasible be used to define critical and non-critical CSS rules at a component level.</p><h2>We&#39;re still working this stuff out</h2><p>While the <a href="https://developers.google.com/speed/pagespeed/insights_extensions">update to the web version of PageSpeed Insights</a> is almost a year old now, I feel that the topic of critical CSS and prioritising above-the-fold content has only gained significant traction in the past few months. I hope by giving you and insight into the way I&#39;ve handle its authoring will entice you into incorporate it into your work-flow. And make sure to keep a weather eye on the tools outline above, as most are in the early stages of development and I expect exciting changes ahead.</p></div></div><div role="contentinfo" class="footer"><span>&copy; 2014</span> <span>Ben Edwards</span> <a href="/styleguide/">Style guide</a> <a href="mailto:hello@benedfit.com" rel="me">Email</a> <a href="https://twitter.com/benedfit" rel="me">Twitter</a> <a href="https://github.com/benedfit/" rel="me">GitHub</a> <a href="https://codepen.io/benedfit/" rel="me">CodePen</a></div><script>(function(e,a,t,n,c,o,s){e.GoogleAnalyticsObject=c,e[c]=e[c]||function(){(e[c].q=e[c].q||[]).push(arguments)},e[c].l=1*new Date,o=a.createElement(t),s=a.getElementsByTagName(t)[0],o.async=1,o.src=n,s.parentNode.insertBefore(o,s)})(window,document,"script","//www.google-analytics.com/analytics.js","ga"),ga("create","UA-34470231-1","auto"),ga("send","pageview");</script></body></html>